#
#                                            prg/ocmng/Makefile.in
#
Depend_on 		= 			$(Clip_L_Dir)/libclip-codb.so
LIBS  			= 			-lclip-codb
OBJS 				= 			$(sort 					\
											funcs_a.o 	\
											funcs_c.o 	\
											funcs_d.o 	\
											funcs_i.o 	\
											funcs_w.o 	\
											funcs_x.o 	\
											funcs_r.o 	\
											funcs_s.o 	\
								)
INCS 				= 			funcs_s.prg ci_ocmng.ch
PROGS 			= 			ocmng$(EXESUFF) xml2xmo$(EXESUFF)

export

######################################################################################
###################################################################################### local rules

all: Makefile $(OBJS) $(PROGS)

hash1 :

cfg :

cleanc:
	$(E_rm)rm -f$(V) $(PROGS) *.c *.pro *.b
	$(E_rm)./cleanxmo.sh

distcleanc :
	$(E_rm)rm -rf$(V) *.g

include $(Makefile_o_in)

ocmng$(EXESUFF): ocmng.prg  $(OBJS) $(INCS) Makefile $(CLIP) $(LIBCLIP) $(Depend_on)
	$(E_clip)if [ -f $(subst .prg,.g,$<) ] ; then 						\
		$(Trace_clip_d) 	;														\
		$(CLIP) $(CLIPFLAGS) -g -o $@ -esM $< $(OBJS) $(LIBS) ;	\
	else 																				\
		$(Trace_clip) 		;														\
		$(CLIP) $(CLIPFLAGS) -o $@ -esM $< $(OBJS) $(LIBS) ;		\
	fi

xml2xmo$(EXESUFF): xml2xmo.prg  $(OBJS) $(INCS) $(CLIP) $(LIBCLIP) $(Depend_on)
	$(E_clip)if [ -f $(subst .prg,.g,$<) ] ; then 						\
		$(Trace_clip_d) 	;														\
		$(CLIP) $(CLIPFLAGS) -g -o $@ -esM $< $(OBJS) $(LIBS) ;	\
	else 																				\
		$(Trace_clip) 		;														\
		$(CLIP) $(CLIPFLAGS) -o $@ -esM $< $(OBJS) $(LIBS) ;		\
	fi

install: all
	$(E_cp)cp --remove-destination -fpu$(V) $(PROGS) cleanxmo.sh $(INSTDIR)/bin

include $(Makefile_end_in)

