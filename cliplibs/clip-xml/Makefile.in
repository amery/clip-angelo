#
#                                            clip-xml/Makefile.in
#
# This is a part of CLIP-XML library
#
# Copyright (C) 2006 by E/AS Software Foundation
# Author: Andrey Cherepanov <skull@eas.lrn.ru>
#
# Copyright (C) 2006 by ITK
# Author: Alena <alena@itk.ru>
#

Local_Depend = include/*.h include/*.ch


#CLIP = $(CLIPROOT)/bin/clip

.SUFFIXES: .prg .o .po

LIBS= -lexpat $(C_LIBS)
#CFLAGS  = -I. $(C_FLAGS)
# $(XCFLAGS)

#XLIB=libclip-xml.a
#XSLIB=libclip-xml$(DLLSUFF)
#XSLIBREAL=libclip-xml$(DLLREALSUFF)

#XTARGETS=$(XLIB) $(XSLIB)
CLIPFLAGS += -n
PROG= clip-xml
SRC = expat.c
OBJ = expat.o
XLIBOBJS = $(OBJ)
OBJS    = xmltag.o xmltree.o xpath.o

HDRS	= include/clip-expat.ch
HASHSRCS = $(SRC) $(HDRS)
ADDLIBS =

.PHONY: all clean uninstall distclean

all : Makefile hash lib $(STARGET)

cfg :
	$(E_cp)cp --remove-destination -fpu$(V) include/clip-expat.ch $(Clip_I_Dir)/
	$(E_cp)cp --remove-destination -fpu$(V) include/clip-expat.h $(Clip_I_Dir)/

hash: include/_hashxml.h

include/_hashxml.h: $(HASHSRCS)
	$(E_e)$(Trace)
	$(E_xx)clip_hashextract$(EXESUFF) $(HASHSRCS) | sort -u > include/_hashxml.h
	$(E_if)cmp include/_hashxml.h include/hashxml.h 2>/dev/null || cp -f$(V) include/_hashxml.h include/hashxml.h


lib :
	$(E_if)[ -f $(Dir_Lib) ]

install : all install-lib install-example

cleanc:
	$(E_rm)rm -rf$(V) *.b $(TARGET).* xmltag.c xmltree.c xpath.c

distcleanc :
	$(E_rm)rm -rf$(V) *.g

include $(Makefile_o_in)

include $(Makefile_end_in)

