#
#                                            clip-ui/Makefile.in
#
# This is a part of CLIP-UI library
#
# Copyright (C) 2003-2006 by E/AS Software Foundation
# Author: Andrey Cherepanov <skull@eas.lrn.ru>
Local_Depend = include/*.ch

DRIVERSDIR = $(DESTDIR)/lib/drivers
#CLIP = $(CLIPROOT)/bin/clip

.SUFFIXES: .prg .o .po

PROG = clip-ui
#TARGET  = libclip-ui$(DLLSUFF)
#RTARGET = libclip-ui$(DLLREALSUFF)

OBJS    = $(sort button.o checkbox.o choice.o color.o combobox.o edit.o \
		  edittable.o font.o form.o frame.o grid.o image.o label.o \
		  layout.o menu.o progressbar.o radiobutton.o slider.o source.o \
		  table.o timer.o toolbar.o tree.o utils.o window.o workspace.o \
		  glade.o qt_designer.o )

LANGS   = ru_RU.KOI8-R

DIRS_TO_SCAN = drivers

.PHONY: all clean uninstall distclean

all : Makefile var.ch $(DIRS_TO_SCAN) $(STARGET)

cfg :
	cp --remove-destination -fpu$(V) include/clip-ui.ch $(Clip_I_Dir)/

var.ch: Makefile $(Clip_L_Dir)/libclip-xml.so
	$(Trace)
	echo "#define DRIVERSDIR \"$(DRIVERSDIR)\"" >var.ch

#$(TARGET): $(OBJS)
#	$(CLIP_MAKESLIB) $(TARGET) $(OBJS) $(C_LIBS)

cleanc :
#	cd drivers && $(MAKE) clean
#	cd example && $(MAKE) clean
	rm -f$(V) $(TARGET).* var.ch *.dll.a

clear: clean

install : all install-lib install-example
#	mkdir -p$(V) $(DESTDIR)/lib
#	mkdir -p$(V) $(DESTDIR)/include
#	$(CLIP_CP) $(TARGET) $(DESTDIR)/lib
#	$(CLIP_CP) $(RTARGET) $(DESTDIR)/lib
#	mkdir -p $(DESTDIR)/doc/example/clip-ui
#	cp -Ruf$(V) example/* $(DESTDIR)/doc/example/clip-ui/
	mkdir -p$(V) $(DESTDIR)/locale.po
	cd locale.po && 																						\
		for i in $(LANGS); do mkdir -p$(V) $(DESTDIR)/locale.po/$$i/ && 	\
		$(CLIP_CP) $$i/*.po $(DESTDIR)/locale.po/$$i/; done

distclean uninstall: $(DIRS_TO_SCAN)
#	cd drivers && $(MAKE) uninstall
	rm -rf$(V) $(Clip_L_Dir)/$(TARGET).* $(Clip_D_Dir)/example/clip-ui/
	rm -f$(V)  $(Clip_I_Dir)/clip-ui.ch

dist: distclean
	cd .. && tar cvfz clip-ui.tgz clip-ui

include $(Makefile_o_in)

commit:
	_cvs commit

update:
	_cvs update -dP

ucommit:
	_cvs update -dP && _cvs commit

shell:
	sh

include $(Makefile_end_in)

