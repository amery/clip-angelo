#
#                                            clip-gtkextra/Makefile.in
#
# main part
#
#

Local_Depend = include/*.ch include/*.h
.SUFFIXES: .prg .c .po
.PHONY:	tests screen hash

SRCS  = sheet.c fontcombo.c bordercombo.c colorcombo.c togglecombo.c \
	combobox.c itementry.c

OBJS  = $(sort bordercombo.o colorcombo.o combobox.o fontcombo.o itementry.o sheet.o togglecombo.o )

HDRS	= include/clip-gtkextra.ch include/clip-gtkextra.h ../clip-gtk/include/clip-gtk.ch

OBJDIR	= .
EXTOBJS =

HASHSRCS = $(SRCS) $(HDRS)
PROG = clip-gtkextra
SYS = $OSNAME
SYSTEM_NAME = $(OSNAME)
DEFS	=
CC = $(COMPILER)
C_FLAGS  += $(DEFS) $(MEMDBGFLAGS) -I../include/clip-gtk $(XCFLAGS)
export CC CFLAGS
export MEMDBG MEMDBGFLAGS

################################################################################################################

all: Makefile include/clip-gtkextracfg.h hash $(STARGET)

cfg :
	$(E_cp)cp --remove-destination -fpu$(V) include/clip-gtkextra.ch $(Clip_I_Dir)/

d: set_dbg

set_dbg: CDBGFLAGS=-g
set_dbg: all

include/clip-gtkextracfg.h : $(CONFIGURE_SH)
	$(E_e)$(Trace)
	$(E_xx)$(CONFIGURE_SH)

hash: include/_hashcode.h

include/_hashcode.h: $(HASHSRCS)
	$(E_e)$(Trace)
	$(E_xx)clip_hashextract$(EXESUFF) $(HASHSRCS) | sort -u > include/_hashcode.h
	$(E_xx)cmp include/_hashcode.h include/hashcode.h 2>/dev/null || cp --remove-destination -fpu$(V) include/_hashcode.h include/hashcode.h
	$(E_cp)cp -fp$(V)  include/hashcode.h include/_hashcode.h

test: install
	cd example && $(MAKE)

cleanc:
	$(E_rm)rm -rf$(V) *.b $(TARGET).* Makefile.inc include/clip-gtkextracfg.h

distcleanc :
	$(E_rm)rm -rf$(V) *.g


install: all install-lib install-example

include $(Makefile_o_in)

depend:
	$(MAKE) hash
	makedepend -Y  -- $(CFLAGS) -- $(SRCS) 2>/dev/null

commit:
	_cvs commit

update:
	_cvs update -dP

ucommit:
	_cvs update -dP && _cvs commit

shell:
	sh

include $(Makefile_end_in)

