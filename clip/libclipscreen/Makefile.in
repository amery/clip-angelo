#
#                                            clip/libclipscreen/Makefile.in
#
Local_Depend 	= 			../include/*.ch 		\
								../include.h/*.h

OBJS 				= 			$(sort 					\
											tcaps.o 		\
											termgoto.o 	\
											screen.o 	\
											scankey.o 	\
											keymap.o 	\
											)
# charset.o

PROG 				= 			clipscreen
PROGS 			= 			kbd$(EXESUFF) 		\
								cmap$(EXESUFF)
#testscr

KBDOBJS 			= 			$(sort 	scankey.o 	\
											keymap.o 	\
											kbd.o 		\
								)

CMAPOBJS 		= 			charset.o \
								cmap.o

ADDLIBS 			=

export

######################################################################################
###################################################################################### local rules

install all: Makefile $(OBJS) $(ATARGET)

hash1 :
	$(E_xx)$(Clip_M_Dir)/init/LinkAllFiles.sh clip-libclipscreen

cfg :
	$(E_mkD)mkdir -p$(V) $(Clip_I_Dir)/libclipscreen
	$(E_cp)cp --remove-destination -fu$(V) *.h $(Clip_I_Dir)/libclipscreen/
	$(E_cp)cp --remove-destination -fu$(V) ci_charset.h $(Clip_I_Dir)/
	$(E_cp)cp --remove-destination -Rfu$(V) install/* $(INSTDIR)/

kbd$(EXESUFF): $(KBDOBJS) Makefile
	$(Trace_cc)
	$(CC) $(C_FLAGS) -o kbd $(KBDOBJS)


cmap$(EXESUFF):	$(CMAPOBJS) Makefile
	$(Trace_cc)
	$(CC) $(C_FLAGS) -o cmap$(EXESUFF) $(CMAPOBJS)

cleanc:
	$(E_rm)rm -f$(V) *.b $(PROGS) $(ATARGET)

distcleanc :
	$(E_rm)rm -rf$(V) *.g

testscr$(EXESUFF): testscr.o  Makefile $(ATARGET) charset.o Makefile
	$(Trace_cc)
	$(CC) $(C_FLAGS) -o testscr$(EXESUFF) testscr.o $(ATARGET) charset.o -lgpm

include $(Makefile_o_in)

include $(Makefile_end_in)

